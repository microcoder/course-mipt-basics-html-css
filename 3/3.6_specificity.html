<main>
    <header><h3>Специфичность и наследование</h3></header>

    <article> <!-- ===================================================================================== -->
        <h4>Расчет специфичности</h4>
        <p>
            В одном CSS правиле считаем:
            <ul>
                <li>Количество селекторов по идентификатору (=a)</li>
                <li>Количество селекторов по классу, псевдоклассу (:not не учитывается) или атрибуту (=b)</li>
                <li>Количество селекторов элементов (тегов) или псевдоэлементов (=c)</li>
            </ul>
            a - Идентификатор <br>
            b - Класс, псевдокласс, атрибут <br>
            c - Элемент, псевдоэлемент <br>
        </p>
        <p>
            Если вам сложно понять, что такое лексикографический порядок, то одна компания предложила другую аналогию: <br>
            В одном правиле считаем:
            <ul>
                <li>Количество селекторов по идентификатору (=a)</li>
                <li>Количество селекторов по классу, псевдоклассу (:not не учитывается) или атрибуту (=b)</li>
                <li>Количество селекторов элементов (тегов) или псевдоэлементов (=c)</li>
                <li>Универсальный селектор, селекторы потомков, детей и прочие не влияют на специфичность</li>
            </ul>
            a - Идентификатор <br>
            b - Класс, псевдокласс, атрибут <br>
            c - Элемент, псевдоэлемент
        </p>
        <p>
            Применяем высчитанные значения:
            <ol>
                <li>Находим каждому HTML элементу соответствующие ему селекторы</li>
                <li>Сортируем селекторы исходя из специфичности (от менее приоритетных к более приоритетным)</li>
                <li>Применяем правила последовательно</li>
            </ol>
        </p>
        <p>
            Простой пример как "читать" правила CSS:
            <ol>
                <li>
                    У нас есть 3 селектора и первое, что мы должны сделать, это посчитать специфичность каждого:
                    <div class="card bg-light mb-3 mt-3 p-3">
                        <code class="css">
                            /* Здесь 1 селектор, специфичность = 0 0 1 */
                            div {
                                color: blue;
                                font-weight: bold;
                                font-size: 12px;
                            }
                    
                            /* Здесь 2 селектора, специфичность = 0 0 2 */
                            html div {
                                color: red;
                            }
                    
                            /* Здесь 1 селектор, специфичность = 0 0 1 */
                            div {
                                font-size: 15px;
                            }
                        </code>
                        <code>
                            <!-- Запрещаем коду интерпретироваться на странице -->
                        </code>
                    </div>
                    Очевидно, что все три этих селектора выбирают одни и те же наборы элементов, т.е. div'ы.
                </li>
                <li>
                    Далее, мы сортируем их исходя из специфичности, сохраняя последовательность при этом,
                    т.е. нужно поменять местами второй и третий слекторы:
                    <div class="card bg-light mb-3 mt-3 p-3">
                        <code class="css">
                            /* Здесь 1 селектор, специфичность = 0 0 1 */
                            div {
                                color: blue;
                                font-weight: bold;
                                font-size: 12px;
                            }
                    
                            /* Здесь 1 селектор, специфичность = 0 0 1 */
                            div {
                                font-size: 15px;
                            }
                    
                            /* Здесь 2 селектора, специфичность = 0 0 2 */
                            html div {
                                color: red;
                            }
                        </code>
                        <code>
                            <!-- Запрещаем коду интерпретироваться на странице -->
                        </code>
                    </div>
                    
                    Дальше происходит вот такой вот трюк: мы виртуально проваливаем специфичность внутрь каждого свойства:

                    <div class="card bg-light mb-3 mt-3 p-3">
                        <code class="css">
                            div {
                                color: blue;        /* 0 0 1 */
                                font-weight: bold;  /* 0 0 1 */
                                font-size: 12px;    /* 0 0 1 */
                            }
                    
                            div {
                                font-size: 15px;    /* 0 0 1 */
                            }
                    
                            html div {
                                color: red;         /* 0 0 2 */
                            }
                        </code>
                        <code>
                            <!-- Запрещаем коду интерпретироваться на странице -->
                        </code>
                    </div>

                    И вот уже с такими цифрами мы вытаскиваем все CSS свойства:

                    <div class="card bg-light mb-3 mt-3 p-3">
                        <code class="sh">
                            color: blue;          # 0 0 1
                            font-weight: bold;    # 0 0 1
                            font-size: 12px;      # 0 0 1
                            font-size: 15px;      # 0 0 1
                            color: red;           # 0 0 2
                        </code>
                        <code>
                            <!-- Запрещаем коду интерпретироваться на странице -->
                        </code>
                    </div>
                </li>
                <li>
                    Применение CSS правил:
                    <ol>
                        <li>В начале правилом задается синий цвет, но в конце оно переопределяется на красный цвет. Текст будет красным.</li>
                        <li>У нас есть 2 правила размера текста, но второе правило переопределяет первое. Текст будет равен 15px.</li>
                        <li>Правило которое задает жирность шрифта здесь не переопределяется. Текст будет bold.</li>
                    </ol>
                </li>
            </ol>
            <p>
                В этих трех шагах было продемонстрировано как применяются правила CSS. <br>
                Более сложный пример:

                <div class="card bg-light mb-3 mt-3 p-3">
                    <code class="html">
                        <htmltag>
                            <headtag>
                                <style type="text/css">
                                    /* 0 0 1 */
                                    div {
                                        color: blue;
                                        font-weight: bold;
                                        font-size: 12px;
                                    }
                                    /* 0 0 2 */
                                    html div {
                                        color: red;
                                    }
                                    /* 0 0 1 */
                                    div {
                                        font-size: 15px;
                                    }
                                </style>
                            </headtag>
                            <bodytag>
                                <div>
                                    Текст
                                </div>
                            </bodytag>
                        </htmltag>
                    </code>
                    <code>
                        <!-- Запрещаем коду интерпретироваться на странице -->
                    </code>
                </div>

                <div class="card bg-light mb-3 mt-3 p-3">
                    <code class="sh">
                        color: blue;          # 0 0 1
                        font: 13px Arial;     # 0 0 1 - Задает в одном значении несколько свойств (размер шрифта и семейство шрифтов)
                        font-size: 12px;      # 0 0 1
                        font-weight: bold;    # 0 0 1
                        font-size: 15px;      # 0 0 1
                        color: red;           # 0 0 2
                    </code>
                    <code>
                        <!-- Запрещаем коду интерпретироваться на странице -->
                    </code>
                </div>
            </p>
            <p>
                В CSS есть еще два способа изменять приоритет правила. Это инлайн и !important:
                <ol>
                    <li>Инлайн, это возможность указать CSS стили непосредственно внутри HTML элемента:
                        <div class="card bg-light mb-3 mt-3 p-3">
                            <code class="html">
                                <div style="color: blue"></div>
                            </code>
                            <code>
                                <!-- Запрещаем коду интерпретироваться на странице -->
                            </code>
                        </div>
                    </li>
                    <li>
                        <em>!important</em> - это ключевое слово которое употребляется внутри значения правила CSS:
                        <div class="card bg-light mb-3 mt-3 p-3">
                            <code class="css">
                                div {
                                    color: green !important;
                                }
                            </code>
                            <code>
                                <!-- Запрещаем коду интерпретироваться на странице -->
                            </code>
                        </div>
                    </li>
                    <li>
                        Мы можем комбинировать <em>inline</em> и <em>!important</em>:
                        <div class="card bg-light mb-3 mt-3 p-3">
                            <code class="html">
                                <div style="color: white !important"></div>
                            </code>
                            <code>
                                <!-- Запрещаем коду интерпретироваться на странице -->
                            </code>
                        </div>
                    </li>
                </ol>
                Как же это влияет на специфичность?
                <ol>
                    <li>Инлайн стили по умолчанию приоритетней стилей в CSS</li>
                    <li>Стили в CSS с <em>!important</em> приоритетнее инлайн стилей</li>
                    <li>Инлайн стили с <em>!important</em> приоритетнее всего (на самом деле нет)</li>
                </ol>

                Специфичность:

                <div class="card bg-light mb-3 mt-3 p-3">
                    <code class="sh">
                        color: blue;            /* 0 0 1 */
                        font-weight: bold;      /* 0 0 1 */           Применится
                        font-size: 12px;        /* 0 0 1 */
                        font-size: 15px;        /* 0 0 1 */           Применится
                        color: red;             /* 0 0 2 */
                        <div style="color: blue"></div>
                        color: green !important;
                        <div style="color: white !important"></div>   Применится
                    </code>
                    <code>
                        <!-- Запрещаем коду интерпретироваться на странице -->
                    </code>
                </div>
            </p>
        </p>
    </article>

    <article> <!-- ===================================================================================== -->
        <h4>Наследование</h4>
        <p>
            <ol>
                <li>Некоторые стили применяются не только к целевому элементу, но и к его потомкам</li>
                <li>Унаследованные стили не имеют специфичности, т.е. их всегда перебивает любой селектор</li>
                <li>Именно поэтому не рекомендуется пользоваться селекторами *, так как его специфичность будет "0 0 0"</li>
            </ol>
            Рассмотрим пример:
        </p>
        <div class="card bg-light mb-3 p-3">
            <code class="html">
                <htmltag>
                    <headtag>
                        <style type="text/css">
                            /*
                            Универсальный селектор будет приоритетней унаследованного правила.
                            Если расскомментировать, то содержимое элемента <abbr> покрасится в красный, а не зеленый цвет,
                            так как наследование ниже по приоритету:
                                * {
                                    color: red;
                                }
                            */
                            div {
                                color: green;
                            }
                        </style>
                    </headtag>
                    <bodytag>
                        <div>
                            <!-- abbr унаследует правило от div'а -->
                            Привет, <abbr title="Московский Физико-Технический Институт">МФТИ</abbr>
                        </div>
                    </bodytag>
                </htmltag>
            </code>
            <code class="html">
                <htmltag>
                    <headtag>
                        <style type="text/css">
                            /*
                            Универсальный селектор будет приоритетней унаследованного правила.
                            Если расскомментировать, то содержимое элемента <abbr> покрасится в красный, а не зеленый цвет,
                            так как наследование ниже по приоритету:
                                * {
                                    color: red;
                                }
                            */
                            div#ex1 {
                                color: green;
                            }
                        </style>
                    </headtag>
                    <bodytag>
                        <div id="ex1">
                            <!-- abbr унаследует правило от div'а -->
                            Привет, <abbr title="Московский Физико-Технический Институт">МФТИ</abbr>
                        </div>
                    </bodytag>
                </htmltag>
            </code>
        </div>
        <p>
            Не все стили наследуются. Некоторые стили которые могут быть унаследованны (полный список будет в ссылках к данной лекции): <br>
            <ul>
                <li>color</li>
                <li>cursor</li>
                <li>direction</li>
                <li>empty-cells</li>
                <li>font-famaly</li>
                <li>font-size</li>
                <li>font-weight</li>
                <li>font-style</li>
                <li>font-variant</li>
                <li>font</li>
                <li>letter-spacing</li>
                <li>list-style-type</li>
                <li>list-style-position</li>
                <li>list-style-image</li>
                <li>list-style</li>
                <li>line-height</li>
                <li>quotes</li>
                <li>text-align</li>
                <li>text-indent</li>
                <li>text-transform</li>
                <li>visibility</li>
                <li>white-space</li>
                <li>word-spacing</li>
            </ul>
        </p>
    </article>

    <article> <!-- ===================================================================================== -->
        <h4>Порядок наложения стилей в зависимости от источника их получения</h4>
        <p>
            Порядок применения:
            <ol>
                <li>Стили браузера</li>
                <li>Стили пользователя и/или плагинов браузера</li>
                <li>Стили страницы</li>
                <li>Стили страницы с <em>!important</em></li>
                <li>Стили пользователя и/или плагинов браузера с <em>!important</em></li>
            </ol>
        </p>
    </article>
</main>
